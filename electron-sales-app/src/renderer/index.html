<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Manager</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Defer non-critical scripts -->
    <script defer src="../../node_modules/chart.js/dist/chart.umd.js"></script>
    <script>
        // Performance monitoring
        if (window.performance && window.performance.mark) {
            window.performance.mark('pageLoadStart');
        }
        
        // Theme Toggle Functionality - Enhanced with smooth transitions
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
            // Add transition class for smooth theme switching
            document.documentElement.classList.add('theme-transition');
        }

        function updateThemeIcon(theme) {
            const themeToggleBtn = document.getElementById('themeToggleBtn');
            if (!themeToggleBtn) return;
            
            const sunIcon = document.getElementById('sunIcon');
            const moonIcon = document.getElementById('moonIcon');
            
            if (theme === 'dark') {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
                themeToggleBtn.title = 'Switch to light mode';
            } else {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
                themeToggleBtn.title = 'Switch to dark mode';
            }
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            // Add transition effect
            document.documentElement.classList.add('theme-transition');
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
            
            // Remove transition class after animation completes
            setTimeout(() => {
                document.documentElement.classList.remove('theme-transition');
            }, 300);
        }

        // Modern Toast Notification System
        let toastContainer = null;

        function createToastContainer() {
            if (!toastContainer) {
                toastContainer = document.createElement('div');
                toastContainer.className = 'toast-container';
                document.body.appendChild(toastContainer);
            }
            return toastContainer;
        }

        function showNotification(title, message, type = 'info', duration = 4000) {
            const container = createToastContainer();
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg>',
                error: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>',
                warning: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>',
                info: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>'
            };
            
            toast.innerHTML = `
                <div class="toast-icon">${icons[type] || icons.info}</div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="this.parentElement.remove()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            `;
            
            container.appendChild(toast);
            
            // Trigger animation
            setTimeout(() => toast.classList.add('show'), 10);
            
            // Auto remove
            if (duration > 0) {
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 300);
                }, duration);
            }
            
            return toast;
        }

        // Convenience methods
        window.showSuccess = (title, message, duration) => showNotification(title, message, 'success', duration);
        window.showError = (title, message, duration) => showNotification(title, message, 'error', duration);
        window.showWarning = (title, message, duration) => showNotification(title, message, 'warning', duration);
        window.showInfo = (title, message, duration) => showNotification(title, message, 'info', duration);

        // Check authentication on page load
        window.addEventListener('DOMContentLoaded', () => {
            // Mark DOM ready
            if (window.performance && window.performance.mark) {
                window.performance.mark('DOMContentLoaded');
            }
            
            // Initialize theme
            initTheme();

            // Add theme toggle event listener
            const themeToggleBtn = document.getElementById('themeToggleBtn');
            if (themeToggleBtn) {
                themeToggleBtn.addEventListener('click', toggleTheme);
            }

            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) {
                // Redirect to login if not authenticated
                window.location.href = 'login.html';
            } else {
                // Show user info in header
                const user = JSON.parse(currentUser);
                const userInfoDiv = document.createElement('div');
                userInfoDiv.className = 'user-info';
                userInfoDiv.innerHTML = `
                    <span class="user-name">${user.fullName}</span>
                    <span class="user-role" data-role="${user.role}">${user.role}</span>
                    <button id="logoutBtn" class="btn-icon" title="Logout">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                            <polyline points="16 17 21 12 16 7"/>
                            <line x1="21" y1="12" x2="9" y2="12"/>
                        </svg>
                    </button>
                `;
                document.querySelector('.header-right').prepend(userInfoDiv);
                
                // Show Users button only for admins
                if (user.role === 'Admin') {
                    const usersHeaderBtn = document.getElementById('usersHeaderBtn');
                    if (usersHeaderBtn) {
                        usersHeaderBtn.style.display = 'block';
                    }
                }
                
                // Add logout functionality
                document.getElementById('logoutBtn').addEventListener('click', () => {
                    sessionStorage.removeItem('currentUser');
                    window.location.href = 'login.html';
                });
            }
        });
    </script>
</head>
<body>
    <!-- Main Application -->
    <div id="app" class="app-container" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <h1 class="app-title">
                    <svg width="48" height="48" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#7c3aed;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="accentGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#06b6d4;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        
                        <!-- Rounded square background -->
                        <rect x="10" y="10" width="100" height="100" rx="28" fill="url(#logoGradient)" opacity="0.15"/>
                        
                        <!-- Letter D with modern style -->
                        <path d="M 30 35 L 30 85 L 55 85 C 67 85 75 77 75 60 C 75 43 67 35 55 35 Z M 38 43 L 53 43 C 62 43 67 48 67 60 C 67 72 62 77 53 77 L 38 77 Z" 
                              fill="url(#logoGradient)" stroke="none"/>
                        
                        <!-- Modern chart bars with gradient -->
                        <rect x="82" y="60" width="7" height="20" rx="3.5" fill="url(#accentGradient)"/>
                        <rect x="92" y="48" width="7" height="32" rx="3.5" fill="url(#accentGradient)"/>
                        <rect x="102" y="36" width="7" height="44" rx="3.5" fill="url(#accentGradient)"/>
                        
                        <!-- Sparkle effect -->
                        <circle cx="88" cy="28" r="3" fill="#fbbf24"/>
                        <path d="M 88 22 L 88 34 M 82 28 L 94 28" stroke="#fbbf24" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>DALID Sales Manager</span>
                </h1>
                <span id="workbookPath" class="workbook-path" data-translate="common.noWorkbook">No workbook loaded</span>
            </div>
            <div class="header-right">
                <!-- Notification Bell -->
                <div class="notification-container">
                    <button id="notificationBtn" class="btn-icon notification-btn" title="Notifications">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                    </button>
                    <!-- Notification Dropdown -->
                    <div class="notification-dropdown" id="notificationDropdown">
                        <div class="notification-header">
                            <h3 data-translate="common.notifications">Notifications</h3>
                            <button class="btn-icon" id="clearNotificationsBtn" data-translate-title="common.clearAll" title="Clear all">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 6h18"/>
                                    <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                    <path d="M10 11v6"/>
                                    <path d="M14 11v6"/>
                                    <path d="M5 6v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6"/>
                                </svg>
                            </button>
                        </div>
                        <div class="notification-list" id="notificationList">
                            <p class="notification-empty" data-translate="common.noNotifications">No new notifications</p>
                        </div>
                    </div>
                </div>
                <button id="themeToggleBtn" class="btn-icon" data-translate-title="common.toggleTheme" title="Toggle theme">
                    <svg id="sunIcon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="4"/>
                        <path d="M12 2v2"/>
                        <path d="M12 20v2"/>
                        <path d="m4.93 4.93 1.41 1.41"/>
                        <path d="m17.66 17.66 1.41 1.41"/>
                        <path d="M2 12h2"/>
                        <path d="M20 12h2"/>
                        <path d="m6.34 17.66-1.41 1.41"/>
                        <path d="m19.07 4.93-1.41 1.41"/>
                    </svg>
                    <svg id="moonIcon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
                        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
                    </svg>
                </button>
                <button id="usersHeaderBtn" class="btn-icon" data-translate-title="navigation.users" style="display: none;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                </button>
                <button id="settingsHeaderBtn" class="btn-icon" data-translate-title="navigation.settings">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                </button>
                <button id="refreshBtn" class="btn-icon" data-translate-title="common.refreshData">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                        <path d="M21 3v5h-5"/>
                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                        <path d="M3 21v-5h5"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="dashboard">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="7" height="9" x="3" y="3" rx="1"/>
                    <rect width="7" height="5" x="14" y="3" rx="1"/>
                    <rect width="7" height="9" x="14" y="12" rx="1"/>
                    <rect width="7" height="5" x="3" y="16" rx="1"/>
                </svg>
                <span data-translate="navigation.dashboard">Dashboard</span>
            </button>
            <button class="nav-tab" data-tab="products">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m7.5 4.27 9 5.15"/>
                    <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
                    <path d="m3.3 7 8.7 5 8.7-5"/>
                    <path d="M12 22V12"/>
                </svg>
                <span data-translate="navigation.products">Products</span>
            </button>
            <button class="nav-tab" data-tab="customers">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                <span data-translate="navigation.customers">Customers</span>
            </button>
            <button class="nav-tab" data-tab="sales">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/>
                    <path d="M3 6h18"/>
                    <path d="M16 10a4 4 0 0 1-8 0"/>
                </svg>
                <span data-translate="navigation.sales">Sales & Invoices</span>
            </button>
            <button class="nav-tab" data-tab="inventory">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
                    <circle cx="12" cy="12" r="4"/>
                </svg>
                <span data-translate="navigation.inventory">Inventory</span>
            </button>
            <button class="nav-tab" data-tab="analytics">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 3v18h18"/>
                    <path d="m19 9-5 5-4-4-3 3"/>
                    <circle cx="18" cy="8" r="2"/>
                </svg>
                <span data-translate="navigation.analytics">Analytics</span>
            </button>
            <button class="nav-tab" data-tab="accounting" id="accountingNavBtn" style="display: none;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="20" height="14" x="2" y="5" rx="2"/>
                    <path d="M2 10h20"/>
                </svg>
                <span data-translate="navigation.accounting">Accounting</span>
            </button>
            <button class="nav-tab" data-tab="reports">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <path d="M14 2v6h6"/>
                    <path d="M12 18v-6"/>
                    <path d="M9 15v3"/>
                    <path d="M15 15v3"/>
                </svg>
                <span data-translate="navigation.reports">Reports</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboardTab" class="tab-content active">
                <!-- Dashboard Overview -->
                <div class="dashboard-section">
                    <div class="section-header">
                        <h3 data-translate="dashboard.overview">Dashboard Overview</h3>
                        <p class="section-subtitle" data-translate="dashboard.overviewDescription">Key business metrics and statistics</p>
                    </div>
                    
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="8" cy="21" r="1"/>
                                        <circle cx="19" cy="21" r="1"/>
                                        <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="dashboard.totalSales">Total Sales</h4>
                                <p class="kpi-value" id="totalSales">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 3v18h18"/>
                                        <path d="m19 9-5 5-4-4-3 3"/>
                                        <circle cx="18" cy="8" r="2"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="dashboard.totalProfit">Total Profit</h4>
                                <p class="kpi-value" id="totalProfit">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="m7.5 4.27 9 5.15"/>
                                        <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
                                        <path d="m3.3 7 8.7 5 8.7-5"/>
                                        <path d="M12 22V12"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="dashboard.totalProducts">Products</h4>
                                <p class="kpi-value" id="totalProducts">0</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                                        <circle cx="9" cy="7" r="4"/>
                                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="dashboard.totalCustomers">Customers</h4>
                                <p class="kpi-value" id="totalCustomers">0</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Financial Performance -->
                <div class="dashboard-section">
                    <div class="section-header">
                        <h3 data-translate="dashboard.financialPerformance">Financial Performance</h3>
                        <p class="section-subtitle" data-translate="dashboard.financialPerformanceDescription">Sales and profit trends</p>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="dashboardOverviewChart"></canvas>
                    </div>
                </div>
                
                <!-- Recent Activity -->
                <!-- Changed from dashboard-grid to dashboard-sections-stack to make each section full width -->
                <div class="dashboard-sections-stack">
                    <div class="dashboard-section">
                        <div class="section-header">
                            <h3 data-translate="dashboard.recentInvoices">Recent Invoices</h3>
                            <p class="section-subtitle" data-translate="dashboard.recentInvoicesDescription">Latest customer transactions</p>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table" id="recentInvoicesTable">
                                <thead>
                                    <tr>
                                        <th data-translate="dashboard.invoiceId" class="sortable">Invoice ID</th>
                                        <th data-translate="common.date" class="sortable">Date</th>
                                        <th data-translate="common.customer" class="sortable">Customer</th>
                                        <th data-translate="common.amount" class="sortable">Amount</th>
                                        <th data-translate="dashboard.profit" class="sortable">Profit</th>
                                        <th data-translate="common.status" class="sortable">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="recentInvoicesBody">
                                    <tr>
                                        <td colspan="6" class="empty-state" data-translate="common.noInvoices">No invoices yet</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="dashboard-section">
                        <div class="section-header" style="display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <h3 data-translate="dashboard.lowStockAlert">Low Stock Alert</h3>
                                <p class="section-subtitle" data-translate="dashboard.lowStockDescription">Products running low on inventory</p>
                            </div>
                            <button class="btn btn-secondary btn-small" onclick="openLowStockModal()" style="display: flex; align-items: center; gap: 0.5rem;">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <line x1="12" y1="16" x2="12" y2="12"/>
                                    <line x1="12" y1="8" x2="12.01" y2="8"/>
                                </svg>
                                <span data-translate="common.viewAll">View All</span>
                            </button>
                        </div>
                        
                        <div id="lowStockAlert" class="alert-container">
                            <p class="empty-state" data-translate="common.allStocked">All products are well stocked</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Accounting Tab -->
            <div id="accountingTab" class="tab-content">
                <!-- Accounting Overview -->
                <div class="accounting-section">
                    <div class="section-header">
                        <h3 data-translate="accounting.overview">Accounting Overview</h3>
                        <p class="section-subtitle" data-translate="accounting.overviewDescription">Key accounting metrics and financial summaries</p>
                    </div>
                    
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="accounting.totalRevenue">Total Revenue</h4>
                                <p class="kpi-value" id="totalRevenueValue">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="accounting.totalExpenses">Total Expenses</h4>
                                <p class="kpi-value" id="totalExpensesValue">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="accounting.netIncome">Net Income</h4>
                                <p class="kpi-value" id="netIncomeValue">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 3v18h18"/>
                                        <path d="M18 17V9"/>
                                        <path d="M13 17V5"/>
                                        <path d="M8 17v-3"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="accounting.totalAssets">Total Assets</h4>
                                <p class="kpi-value" id="totalAssetsValue">$0.00</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Journal Entry -->
                <div class="accounting-section">
                    <div class="section-header">
                        <h3 data-translate="accounting.quickJournal">Quick Journal Entry</h3>
                        <p class="section-subtitle" data-translate="accounting.quickJournalDescription">Create and post journal entries quickly</p>
                    </div>
                    
                    <div class="form-container">
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: end; margin-bottom: 1rem;">
                            <div class="form-group" style="min-width: 160px;">
                                <label data-translate="common.date">Date</label>
                                <input type="date" id="jeDate" class="form-control">
                            </div>
                            <div class="form-group" style="flex: 1; min-width: 200px;">
                                <label data-translate="common.description">Description</label>
                                <input type="text" id="jeDesc" class="form-control" data-translate-placeholder="common.description" placeholder="Description">
                            </div>
                            <div class="form-group" style="min-width: 140px;">
                                <label data-translate="accounting.reference">Reference</label>
                                <input type="text" id="jeRef" class="form-control" data-translate-placeholder="accounting.reference" placeholder="Ref#">
                            </div>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-translate="accounting.line">Line</th>
                                        <th data-translate="accounting.account">Account</th>
                                        <th data-translate="accounting.debit">Debit</th>
                                        <th data-translate="accounting.credit">Credit</th>
                                        <th data-translate="common.actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="jeLinesBody">
                                    <tr>
                                        <td>1</td>
                                        <td><input class="form-control je-account" data-translate-placeholder="accounting.accountCodePlaceholder" placeholder="Account (code)" list="accountsDatalist"></td>
                                        <td><input type="number" class="form-control je-debit" min="0" step="0.01"></td>
                                        <td><input type="number" class="form-control je-credit" min="0" step="0.01"></td>
                                        <td><button class="btn btn-secondary btn-small btn-icon-only" id="jeAddLineBtn" title="Add Line">
                                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M12 5v14M5 12h14"/>
                                            </svg>
                                        </button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Accounts datalist for autocomplete -->
                        <datalist id="accountsDatalist"></datalist>
                        
                        <div style="display:flex; gap: 1rem; margin-top: 1rem; align-items: center; flex-wrap: wrap;">
                            <button class="btn btn-primary" id="jeSubmitBtn" data-translate="accounting.postJournal">Post Journal</button>
                            <span id="jeTotals" style="color: var(--text-secondary);"></span>
                        </div>
                    </div>
                </div>
                
                <!-- Financial Reports -->
                <div class="accounting-grid">
                    <!-- Trial Balance -->
                    <div class="accounting-section">
                        <div class="section-header" style="display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <h3 data-translate="accounting.trialBalance">Trial Balance</h3>
                                <p class="section-subtitle" data-translate="accounting.trialBalanceDescription">Verify accounting accuracy with debit/credit balances</p>
                            </div>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-secondary btn-icon-only" id="tbExportCsvBtn" title="Export CSV">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                        <circle cx="12" cy="5" r="2"/>
                                    </svg>
                                </button>
                                <button class="btn btn-secondary btn-icon-only" id="tbExportPdfBtn" title="Export PDF">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div style="display:flex; gap: 1rem; margin-bottom: 1rem; align-items: end; flex-wrap: wrap;">
                            <div class="form-group">
                                <label data-translate="reports.fromDate">From Date:</label>
                                <input type="date" id="tbFrom" class="form-control">
                            </div>
                            <div class="form-group">
                                <label data-translate="reports.toDate">To Date:</label>
                                <input type="date" id="tbTo" class="form-control">
                            </div>
                            <button class="btn btn-secondary" id="tbRefreshBtn" data-translate="common.refreshData">Refresh</button>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-translate="accounting.code">Code</th>
                                        <th data-translate="accounting.account">Account</th>
                                        <th data-translate="accounting.type">Type</th>
                                        <th data-translate="accounting.debit">Debit</th>
                                        <th data-translate="accounting.credit">Credit</th>
                                        <th data-translate="accounting.balance">Balance</th>
                                    </tr>
                                </thead>
                                <tbody id="tbBody">
                                    <tr><td colspan="6" class="empty-state" data-translate="common.noData">No data</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Financial Statements -->
                    <div class="accounting-section">
                        <div class="section-header" style="display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <h3 data-translate="accounting.financialStatements">Financial Statements</h3>
                                <p class="section-subtitle" data-translate="accounting.financialStatementsDescription">Generate income statements and balance sheets</p>
                            </div>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-secondary btn-icon-only" id="fsExportCsvBtn" title="Export CSV">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                        <circle cx="12" cy="5" r="2"/>
                                    </svg>
                                </button>
                                <button class="btn btn-secondary btn-icon-only" id="fsExportPdfBtn" title="Export PDF">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div style="display:flex; gap: 1rem; margin-bottom: 1rem; align-items: end; flex-wrap: wrap;">
                            <div class="form-group">
                                <label data-translate="reports.fromDate">From Date:</label>
                                <input type="date" id="fsFrom" class="form-control">
                            </div>
                            <div class="form-group">
                                <label data-translate="accounting.toOrAsOf">To / As of</label>
                                <input type="date" id="fsTo" class="form-control">
                            </div>
                            <button class="btn btn-secondary" id="fsIncomeBtn" data-translate="accounting.incomeStatement">Income Statement</button>
                            <button class="btn btn-secondary" id="fsBalanceBtn" data-translate="accounting.balanceSheet">Balance Sheet</button>
                        </div>
                        
                        <div id="fsOutput" class="table-container"></div>
                    </div>
                </div>
            </div>

            <!-- Products Tab -->
            <div id="productsTab" class="tab-content">
                <div class="tab-header">
                    <h2 data-translate="products.management">Products Management</h2>
                    <div class="btn-group btn-group-horizontal">
                        <button id="showDeletedProductsBtn" class="btn btn-secondary">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"/>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                            </svg>
                            <span data-translate="products.viewDeleted">View Deleted</span>
                        </button>
                        <button id="showLowStockBtn" class="btn btn-secondary">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                <path d="M12 9v4M12 17h.01"/>
                            </svg>
                            <span data-translate="products.viewLowStock">View Low Stock</span>
                        </button>
                        <button id="addProductBtn" class="btn btn-primary btn-icon-only" title="Add Product">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14M5 12h14"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Products Dashboard -->
                <div class="products-dashboard">
                    <!-- Products Overview -->
                    <div class="products-section">
                        <div class="section-header">
                            <h3 data-translate="products.overview">Products Overview</h3>
                            <p class="section-subtitle" data-translate="products.productMetrics">Key product metrics and statistics</p>
                        </div>
                        
                        <div class="kpi-grid">
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M3 3v18h18"/>
                                            <path d="M18 17V9"/>
                                            <path d="M13 17V5"/>
                                            <path d="M8 17v-3"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="products.totalProducts">Total Products</h4>
                                    <p class="kpi-value" id="totalProductsValue">0</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                            <circle cx="8.5" cy="7" r="4"/>
                                            <path d="M20 8v6M23 11h-6"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="products.totalStockItems">Total Stock Items</h4>
                                    <p class="kpi-value" id="totalStockItemsValue">0</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="products.totalStockValue">Total Stock Value</h4>
                                    <p class="kpi-value" id="totalStockValue">$0.00</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card kpi-warning">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                            <path d="M12 9v4M12 17h.01"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="products.lowStockItems">Low Stock Items</h4>
                                    <p class="kpi-value" id="lowStockItemsValue">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Product Search -->
                    <div class="products-section">
                        <div class="section-header">
                            <h3 data-translate="products.productSearch">Product Search</h3>
                            <p class="section-subtitle" data-translate="products.searchAndFilter">Find and filter products</p>
                        </div>
                        
                        <div class="search-bar">
                            <input type="text" id="productSearch" data-translate-placeholder="products.searchPlaceholder" placeholder="Search products..." class="search-input">
                        </div>
                    </div>
                    
                    <!-- Products Table -->
                    <div class="products-section">
                        <div class="section-header">
                            <h3 data-translate="products.productList">Product List</h3>
                            <p class="section-subtitle" data-translate="products.allProducts">All active products</p>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table" id="productsTable">
                                <thead>
                                    <tr>
                                        <th data-translate="products.productName" class="sortable">Product Name</th>
                                        <th data-translate="products.quantity" class="sortable">Quantity</th>
                                        <th data-translate="products.buyPrice" class="sortable">Buy Price</th>
                                        <th data-translate="products.salePrice" class="sortable">Sale Price</th>
                                        <th data-translate="products.profitMargin" class="sortable">Profit Margin</th>
                                        <th data-translate="common.actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTableBody">
                                    <tr>
                                        <td colspan="6" class="empty-state" data-translate="common.noProducts">No products found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Low Stock Products Modal -->
            <div id="lowStockModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 data-translate="products.lowStockTitle">Low Stock Products</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-form">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-translate="common.product">Product</th>
                                        <th data-translate="common.quantity">Quantity</th>
                                    </tr>
                                </thead>
                                <tbody id="lowStockTableBody">
                                    <tr>
                                        <td colspan="2" class="empty-state" data-translate="common.allStocked">All products are well stocked</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-actions">
                            <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.close">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notification Details Modal -->
            <div id="notificationDetailsModal" class="modal">
                <div class="modal-content modal-medium">
                    <div class="modal-header">
                        <h2 id="notificationModalTitle" data-translate="notifications.modalTitle">Notification Details</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-form">
                        <div class="notification-details-container" id="notificationDetailsContent">
                            <div class="notification-detail-item">
                                <div class="detail-label" data-translate="notifications.title">Title</div>
                                <div class="detail-value" id="notificationModalTitleValue" style="font-weight: 700;"></div>
                            </div>
                            <div class="notification-detail-item">
                                <div class="detail-label" data-translate="notifications.description">Description</div>
                                <div class="detail-value" id="notificationModalDesc"></div>
                            </div>
                            <div class="notification-detail-item" id="notificationModalDetailsContainer" style="display: none;">
                                <div class="detail-label" data-translate="notifications.details">Details</div>
                                <div class="detail-value" id="notificationModalDetails"></div>
                            </div>
                            <div class="notification-detail-item">
                                <div class="detail-label" data-translate="notifications.time">Time</div>
                                <div class="detail-value" id="notificationModalTime"></div>
                            </div>
                        </div>
                        <!-- Low Stock Products Table (shown when applicable) -->
                        <div id="lowStockTableContainer" style="display: none; margin-top: 1.5rem;">
                            <div class="table-container">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th data-translate="common.product">Product</th>
                                            <th data-translate="common.quantity">Quantity</th>
                                        </tr>
                                    </thead>
                                    <tbody id="notificationLowStockBody">
                                        <tr>
                                            <td colspan="2" class="empty-state" data-translate="common.allStocked">All products are well stocked</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.close">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Deleted Products Modal -->
            <div id="deletedProductsModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 data-translate="products.deletedProductsTitle">Deleted Products</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-form">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-translate="products.productName">Product Name</th>
                                        <th data-translate="products.quantity">Quantity</th>
                                        <th data-translate="products.buyPrice">Buy Price</th>
                                        <th data-translate="products.salePrice">Sale Price</th>
                                        <th data-translate="common.actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="deletedProductsTableBody">
                                    <tr>
                                        <td colspan="5" class="empty-state" data-translate="products.noDeletedProducts">No deleted products</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-actions">
                            <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.close">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Analysis Modal -->
            <div id="productAnalysisModal" class="modal">
                <div class="modal-content modal-large">
                    <div class="modal-header">
                        <h2 id="productAnalysisModalTitle" data-translate="products.productAnalysis">Product Analysis</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <div class="modal-form">
                        <!-- Product Key Metrics -->
                        <div class="dashboard-grid" style="margin-bottom: 2rem;">
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 60px; height: 60px; margin: 0 auto 1rem;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                                    </svg>
                                </div>
                                <div class="stat-info">
                                    <h3 data-translate="products.currentStock">Current Stock</h3>
                                    <p class="stat-value" id="productCurrentStock" style="font-size: 1.5rem;">0</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 60px; height: 60px; margin: 0 auto 1rem;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                    </svg>
                                </div>
                                <div class="stat-info">
                                    <h3 data-translate="products.totalRevenue">Total Revenue</h3>
                                    <p class="stat-value" id="productTotalRevenue" style="font-size: 1.5rem;">$0.00</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 60px; height: 60px; margin: 0 auto 1rem;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 3v18h18"/>
                                        <path d="M18 17V9"/>
                                        <path d="M13 17V5"/>
                                        <path d="M8 17v-3"/>
                                    </svg>
                                </div>
                                <div class="stat-info">
                                    <h3 data-translate="products.totalProfit">Total Profit</h3>
                                    <p class="stat-value" id="productTotalProfit" style="font-size: 1.5rem;">$0.00</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 60px; height: 60px; margin: 0 auto 1rem;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="9" cy="21" r="1"/>
                                        <circle cx="20" cy="21" r="1"/>
                                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                                    </svg>
                                </div>
                                <div class="stat-info">
                                    <h3 data-translate="products.unitsSold">Units Sold</h3>
                                    <p class="stat-value" id="productUnitsSold" style="font-size: var(--font-2xl);">0</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 60px; height: 60px; margin: 0 auto 1rem;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 3v18h18"/>
                                        <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"/>
                                    </svg>
                                </div>
                                <div class="stat-info">
                                    <h3 data-translate="products.profitMargin">Profit Margin</h3>
                                    <p class="stat-value" id="productProfitMargin" style="font-size: var(--font-2xl);">0%</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="width: 60px; height: 60px; margin: 0 auto 1rem;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="12" y1="1" x2="12" y2="23"/>
                                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                    </svg>
                                </div>
                                <div class="stat-info">
                                    <h3 data-translate="products.avgSalePrice">Avg Sale Price</h3>
                                    <p class="stat-value" id="productAvgSalePrice" style="font-size: var(--font-2xl);">$0.00</p>
                                </div>
                            </div>
                        </div>

                        <!-- Sales Trend Chart -->
                        <div class="dashboard-section" style="margin-bottom: 2rem;">
                            <h2 data-translate="products.salesTrend">Sales Trend</h2>
                            <div style="height: 300px; position: relative;">
                                <canvas id="productSalesTrendChart"></canvas>
                            </div>
                        </div>

                        <!-- Inventory Movement History -->
                        <div class="dashboard-section">
                            <h2 data-translate="products.inventoryMovements">Inventory Movement History</h2>
                            <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                                <table class="data-table">
                                    <thead>
                                        <tr>
                                            <th data-translate="common.date">Date</th>
                                            <th data-translate="inventory.type">Type</th>
                                            <th data-translate="common.quantity">Quantity</th>
                                            <th data-translate="inventory.reference">Reference</th>
                                            <th data-translate="inventory.balanceAfter">Balance After</th>
                                            <th data-translate="inventory.notes">Notes</th>
                                        </tr>
                                    </thead>
                                    <tbody id="productInventoryMovementsBody">
                                        <tr>
                                            <td colspan="6" class="empty-state" data-translate="inventory.noMovements">No inventory movements</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="modal-actions">
                            <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.close">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customers Tab -->
            <div id="customersTab" class="tab-content">
                <div class="tab-header">
                    <h2 data-translate="customers.title">Customers</h2>
                    <button id="addCustomerBtn" class="btn btn-primary btn-icon-only" title="Add Customer">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                    </button>
                </div>

                <!-- Customers Dashboard -->
                <div class="customers-dashboard">
                    <!-- Customers Overview -->
                    <div class="customers-section">
                        <div class="section-header">
                            <h3 data-translate="customers.overview">Customers Overview</h3>
                            <p class="section-subtitle" data-translate="customers.customerMetrics">Key customer metrics and statistics</p>
                        </div>
                        
                        <div class="kpi-grid">
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                            <circle cx="8.5" cy="7" r="4"/>
                                            <path d="M20 8v6M23 11h-6"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="customers.totalCustomers">Total Customers</h4>
                                    <p class="kpi-value" id="totalCustomersValue">0</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="customers.totalRevenue">Total Revenue</h4>
                                    <p class="kpi-value" id="customersTotalRevenueValue">$0.00</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                            <path d="M12 9v4M12 17h.01"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="customers.totalProfit">Total Profit</h4>
                                    <p class="kpi-value" id="customersTotalProfitValue">$0.00</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <path d="M12 6v6l4 2"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="customers.avgOrderValue">Avg Order Value</h4>
                                    <p class="kpi-value" id="customersAvgOrderValue">$0.00</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Customer Search -->
                    <div class="customers-section">
                        <div class="section-header">
                            <h3 data-translate="customers.customerSearch">Customer Search</h3>
                            <p class="section-subtitle" data-translate="customers.searchAndFilter">Find and filter customers</p>
                        </div>
                        
                        <div class="search-bar">
                            <input type="text" id="customerSearch" data-translate-placeholder="customers.searchPlaceholder" placeholder="Search customers..." class="search-input">
                        </div>
                    </div>
                    
                    <!-- Customers Table -->
                    <div class="customers-section">
                        <div class="section-header">
                            <h3 data-translate="customers.customerList">Customer List</h3>
                            <p class="section-subtitle" data-translate="customers.allCustomers">All registered customers</p>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th data-translate="customers.customerName">Customer Name</th>
                                        <th data-translate="customers.phone">Phone</th>
                                        <th data-translate="customers.email">Email</th>
                                        <th data-translate="customers.address">Address</th>
                                        <th data-translate="common.actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="customersTableBody">
                                    <tr>
                                        <td colspan="5" class="empty-state" data-translate="common.noCustomers">No customers found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- Pagination Controls -->
                        <div id="customersPagination" class="pagination-container"></div>
                    </div>
                </div>
            </div>

            <!-- Sales & Invoices Tab -->
            <div id="salesTab" class="tab-content">
                <div class="tab-header">
                    <h2 data-translate="sales.title">Sales & Invoices</h2>
                    <button id="newInvoiceBtn" class="btn btn-primary btn-icon-only" title="New Invoice">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M5 12h14"/>
                        </svg>
                    </button>
                </div>

                <!-- Sales Dashboard -->
                <div class="sales-dashboard">
                    <!-- Sales Overview -->
                    <div class="sales-section">
                        <div class="section-header">
                            <h3 data-translate="sales.overview">Sales Overview</h3>
                            <p class="section-subtitle" data-translate="sales.performanceSummary">Business performance metrics</p>
                        </div>
                        
                        <div class="kpi-grid">
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="sales.totalRevenue">Total Revenue</h4>
                                    <p class="kpi-value" id="totalRevenueValue">$0.00</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                            <path d="M12 9v4M12 17h.01"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="sales.totalProfit">Total Profit</h4>
                                    <p class="kpi-value" id="totalProfitValue">$0.00</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                            <circle cx="8.5" cy="7" r="4"/>
                                            <path d="M20 8v6M23 11h-6"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="sales.totalInvoices">Total Invoices</h4>
                                    <p class="kpi-value" id="totalInvoicesValue">0</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <path d="M12 6v6l4 2"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="sales.avgOrderValue">Avg Order Value</h4>
                                    <p class="kpi-value" id="avgOrderValue">$0.00</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Invoice Filters -->
                    <div class="sales-section">
                        <div class="section-header">
                            <h3 data-translate="sales.invoiceFilters">Invoice Filters</h3>
                            <p class="section-subtitle" data-translate="sales.filterInvoices">Search and filter invoices</p>
                        </div>
                        
                        <div class="btn-wrapper">
                            <div class="filter-group">
                                <label for="invoiceStatusFilter" data-translate="common.status">Status:</label>
                                <select id="invoiceStatusFilter" class="form-control">
                                    <option value="all" data-translate="sales.allStatuses">All Statuses</option>
                                    <option value="Paid" data-translate="sales.paid">Paid</option>
                                    <option value="Pending" data-translate="sales.pending">Pending</option>
                                    <option value="Cancelled" data-translate="sales.cancelled">Cancelled</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="invoiceCustomerFilter" data-translate="common.customer">Customer:</label>
                                <select id="invoiceCustomerFilter" class="form-control">
                                    <option value="all" data-translate="sales.allCustomers">All Customers</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label for="invoiceDateFilter" data-translate="common.date">Date:</label>
                                <input type="date" id="invoiceDateFilter" class="form-control" data-translate-placeholder="sales.selectDate">
                            </div>
                            <button id="clearInvoiceFilters" class="btn btn-secondary btn-icon-only" title="Clear Filters">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 3H2l7 8v7l6-3v-4z"/>
                                    <line x1="8" y1="8" x2="16" y2="16"/>
                                    <line x1="16" y1="8" x2="8" y2="16"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Invoices Table -->
                    <div class="sales-section">
                        <div class="section-header">
                            <h3 data-translate="sales.invoiceList">Invoice List</h3>
                            <p class="section-subtitle" data-translate="sales.allInvoices">All recorded invoices</p>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table" id="invoicesTable">
                                <thead>
                                    <tr>
                                        <th data-translate="sales.invoiceId" class="sortable">Invoice ID</th>
                                        <th data-translate="sales.date" class="sortable">Date</th>
                                        <th data-translate="sales.customer" class="sortable">Customer</th>
                                        <th data-translate="sales.totalAmount" class="sortable">Total Amount</th>
                                        <th data-translate="sales.totalProfit" class="sortable">Total Profit</th>
                                        <th data-translate="sales.status" class="sortable">Status</th>
                                        <th data-translate="common.actions">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="invoicesTableBody">
                                    <tr>
                                        <td colspan="7" class="empty-state" data-translate="common.noInvoices">No invoices found</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- Pagination Controls -->
                        <div id="invoicesPagination" class="pagination-container"></div>
                    </div>
                </div>
            </div>

            <!-- Inventory Tab -->
            <div id="inventoryTab" class="tab-content">
                <div class="tab-header">
                    <h2 data-translate="inventory.management">Inventory Management</h2>
                    <div class="btn-group btn-group-horizontal">
                        <button id="addStockBtn" class="btn btn-primary btn-icon-only" title="Stock Movement">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14M5 12h14"/>
                            </svg>
                        </button>
                        <button id="exportInventoryPdfBtn" class="btn btn-primary btn-icon-only" title="Export to PDF">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Inventory Dashboard -->
                <div class="inventory-dashboard">
                    <!-- Inventory Overview -->
                    <div class="inventory-section">
                        <div class="section-header">
                            <h3 data-translate="inventory.overview">Inventory Overview</h3>
                            <p class="section-subtitle" data-translate="inventory.stockSummary">Current stock status and metrics</p>
                        </div>
                        
                        <div class="kpi-grid">
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                            <circle cx="8.5" cy="7" r="4"/>
                                            <path d="M20 8v6M23 11h-6"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="inventory.totalStockItems">Total Items In Stock</h4>
                                    <p class="kpi-value" id="totalStockItems">0</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="inventory.totalStockValue">Total Stock Value</h4>
                                    <p class="kpi-value" id="totalStockValue">$0.00</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card kpi-warning">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                            <path d="M12 9v4M12 17h.01"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="inventory.lowStockItems">Low Stock Items</h4>
                                    <p class="kpi-value" id="lowStockCount">0</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="inventory.outOfStock">Out of Stock</h4>
                                    <p class="kpi-value" id="outOfStockCount">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Stock Movements -->
                    <div class="inventory-section">
                        <div class="section-header">
                            <h3 data-translate="inventory.recentMovements">Recent Stock Movements</h3>
                            <p class="section-subtitle" data-translate="inventory.latestActivity">Latest inventory transactions</p>
                        </div>
                        
                        <div class="table-container">
                            <table class="data-table" id="inventoryTable">
                                <thead>
                                    <tr>
                                        <th data-translate="common.date" class="sortable">Date</th>
                                        <th data-translate="common.product" class="sortable">Product</th>
                                        <th data-translate="inventory.type" class="sortable">Type</th>
                                        <th data-translate="common.quantity" class="sortable">Quantity</th>
                                        <th data-translate="inventory.reference" class="sortable">Reference</th>
                                        <th data-translate="inventory.balanceAfter" class="sortable">Balance After</th>
                                        <th data-translate="inventory.notes">Notes</th>
                                    </tr>
                                </thead>
                                <tbody id="inventoryTableBody">
                                    <tr>
                                        <td colspan="7" class="empty-state" data-translate="inventory.noMovements">No inventory movements yet</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- Pagination Controls -->
                        <div id="inventoryPagination" class="pagination-container"></div>
                    </div>
                    
                    <!-- Stock Categories -->
                    <div class="inventory-section">
                        <div class="section-header">
                            <h3 data-translate="inventory.stockCategories">Stock Categories</h3>
                            <p class="section-subtitle" data-translate="inventory.inventoryDistribution">Distribution by stock levels</p>
                        </div>
                        
                        <div class="stock-categories">
                            <div class="category-card">
                                <div class="category-header">
                                    <h4 data-translate="inventory.lowStock">Low Stock</h4>
                                    <span class="category-count" id="lowStockCategoryCount">0</span>
                                </div>
                                <div class="category-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="lowStockProgress" style="width: 0%; background: var(--warning-gradient);"></div>
                                    </div>
                                </div>
                                <p class="category-description" data-translate="inventory.lowStockDesc">Items with stock below threshold</p>
                            </div>
                            
                            <div class="category-card">
                                <div class="category-header">
                                    <h4 data-translate="inventory.mediumStock">Medium Stock</h4>
                                    <span class="category-count" id="mediumStockCategoryCount">0</span>
                                </div>
                                <div class="category-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="mediumStockProgress" style="width: 0%; background: var(--primary-gradient);"></div>
                                    </div>
                                </div>
                                <p class="category-description" data-translate="inventory.mediumStockDesc">Items with adequate stock levels</p>
                            </div>
                            
                            <div class="category-card">
                                <div class="category-header">
                                    <h4 data-translate="inventory.highStock">High Stock</h4>
                                    <span class="category-count" id="highStockCategoryCount">0</span>
                                </div>
                                <div class="category-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="highStockProgress" style="width: 0%; background: var(--success-gradient);"></div>
                                    </div>
                                </div>
                                <p class="category-description" data-translate="inventory.highStockDesc">Items with abundant stock levels</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analyticsTab" class="tab-content">
                <div class="tab-header">
                    <h2 data-translate="analytics.title">Analytics & Statistics</h2>
                    <div class="btn-group btn-group-horizontal">
                        <div class="analytics-period">
                            <select id="analyticsPeriod" class="form-control">
                                <option value="7" data-translate="analytics.last7Days">Last 7 Days</option>
                                <option value="30" selected data-translate="analytics.last30Days">Last 30 Days</option>
                                <option value="90" data-translate="analytics.last90Days">Last 90 Days</option>
                                <option value="365" data-translate="analytics.lastYear">Last Year</option>
                                <option value="all" data-translate="analytics.allTime">All Time</option>
                            </select>
                        </div>
                        <button id="exportAnalyticsPdfBtn" class="btn btn-primary btn-icon-only" title="Export to PDF">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7 10 12 15 17 10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Analytics Dashboard -->
                <div class="analytics-dashboard">
                    <!-- Key Performance Indicators -->
                    <div class="analytics-section">
                        <div class="section-header">
                            <h3 data-translate="analytics.keyMetrics">Key Performance Indicators</h3>
                            <p class="section-subtitle" data-translate="analytics.overview">Business performance overview</p>
                        </div>
                        
                        <div class="kpi-grid">
                            <div class="kpi-card kpi-primary">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <path d="M12 6v6l4 2"/>
                                        </svg>
                                    </div>
                                    <div class="kpi-change positive">
                                        <span id="todayProfitChange" data-translate="analytics.today">Today</span>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="analytics.todayProfit">Today's Profit</h4>
                                    <p class="kpi-value" id="todayProfitValue">$0.00</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card kpi-primary">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <path d="M12 6v6l-4 2"/>
                                        </svg>
                                    </div>
                                    <div class="kpi-change">
                                        <span id="yesterdayProfitChange" data-translate="analytics.yesterday">Yesterday</span>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="analytics.yesterdayProfit">Yesterday's Profit</h4>
                                    <p class="kpi-value" id="yesterdayProfitValue">$0.00</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                        </svg>
                                    </div>
                                    <div class="kpi-change positive">
                                        <span id="avgOrderChange">+0%</span>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="analytics.avgOrderValue">Avg Order Value</h4>
                                    <p class="kpi-value" id="avgOrderValue">$0.00</p>
                                </div>
                            </div>
                            
                            <div class="kpi-card">
                                <div class="kpi-header">
                                    <div class="kpi-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                            <circle cx="8.5" cy="7" r="4"/>
                                            <path d="M20 8v6M23 11h-6"/>
                                        </svg>
                                    </div>
                                    <div class="kpi-change positive">
                                        <span id="customersChange">+0</span>
                                    </div>
                                </div>
                                <div class="kpi-content">
                                    <h4 data-translate="analytics.totalCustomersMetric">Total Customers</h4>
                                    <p class="kpi-value" id="totalCustomersMetric">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Financial Performance -->
                    <div class="analytics-section">
                        <div class="section-header">
                            <h3 data-translate="analytics.financialPerformance">Financial Performance</h3>
                            <p class="section-subtitle" data-translate="analytics.revenueAndProfit">Revenue and profit trends</p>
                        </div>
                        
                        <div class="financial-grid">
                            <div class="financial-card">
                                <div class="financial-header">
                                    <h4 data-translate="analytics.totalRevenue">Total Revenue</h4>
                                    <span class="financial-change positive">+0%</span>
                                </div>
                                <p class="financial-value" id="totalRevenueValue">$0.00</p>
                                <div class="financial-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="revenueProgress" style="width: 0%;"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="financial-card">
                                <div class="financial-header">
                                    <h4 data-translate="analytics.totalProfit">Total Profit</h4>
                                    <span class="financial-change positive">+0%</span>
                                </div>
                                <p class="financial-value" id="totalProfitValue">$0.00</p>
                                <div class="financial-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="profitProgress" style="width: 0%;"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="financial-card">
                                <div class="financial-header">
                                    <h4 data-translate="analytics.profitMarginMetric">Profit Margin</h4>
                                    <span class="financial-change positive" id="profitMarginChange">+0%</span>
                                </div>
                                <p class="financial-value" id="profitMarginMetric">0%</p>
                                <div class="financial-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="marginProgress" style="width: 0%;"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="financial-card">
                                <div class="financial-header">
                                    <h4 data-translate="analytics.productsSold">Products Sold</h4>
                                    <span class="financial-change" id="productsSoldChange">0 <span data-translate="analytics.units">units</span></span>
                                </div>
                                <p class="financial-value" id="totalProductsSold">0</p>
                                <div class="financial-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="productsProgress" style="width: 0%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Charts Section -->
                    <div class="analytics-section">
                        <div class="section-header">
                            <h3 data-translate="analytics.visualAnalytics">Visual Analytics</h3>
                            <p class="section-subtitle" data-translate="analytics.trendsAndInsights">Trends and insights</p>
                        </div>
                        
                        <div class="charts-container">
                            <div class="chart-row">
                                <!-- Sales Trend Chart -->
                                <div class="chart-wrapper">
                                    <div class="chart-header">
                                        <h4 data-translate="analytics.salesTrend">Sales Trend</h4>
                                        <p class="chart-subtitle" data-translate="analytics.revenueOverTime">Revenue over time</p>
                                    </div>
                                    <div class="chart-box">
                                        <canvas id="salesTrendChart"></canvas>
                                    </div>
                                </div>
                                
                                <!-- Profit Trend Chart -->
                                <div class="chart-wrapper">
                                    <div class="chart-header">
                                        <h4 data-translate="analytics.profitTrend">Profit Trend</h4>
                                        <p class="chart-subtitle" data-translate="analytics.profitOverTime">Profit over time</p>
                                    </div>
                                    <div class="chart-box">
                                        <canvas id="profitTrendChart"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="chart-row">
                                <!-- Top Products Chart -->
                                <div class="chart-wrapper">
                                    <div class="chart-header">
                                        <h4 data-translate="analytics.topProducts">Top Products</h4>
                                        <p class="chart-subtitle" data-translate="analytics.bestSelling">Best selling products</p>
                                    </div>
                                    <div class="chart-box">
                                        <canvas id="topProductsChart"></canvas>
                                    </div>
                                </div>
                                
                                <!-- Customer Activity Chart -->
                                <div class="chart-wrapper">
                                    <div class="chart-header">
                                        <h4 data-translate="analytics.topCustomers">Top Customers</h4>
                                        <p class="chart-subtitle" data-translate="analytics.topPurchases">By total purchases</p>
                                    </div>
                                    <div class="chart-box">
                                        <canvas id="topCustomersChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reportsTab" class="tab-content">
                <!-- Reports Overview -->
                <div class="reports-section">
                    <div class="section-header">
                        <h3 data-translate="reports.overview">Reports Overview</h3>
                        <p class="section-subtitle" data-translate="reports.overviewDescription">Key business metrics and performance insights</p>
                    </div>
                    
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="reports.totalSales">Total Sales</h4>
                                <p class="kpi-value" id="reportTotalSales">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="reports.totalProfit">Total Profit</h4>
                                <p class="kpi-value" id="reportTotalProfit">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                        <circle cx="8.5" cy="7" r="4"/>
                                        <path d="M20 8v6M23 11h-6"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="reports.invoiceCount">Invoices Count</h4>
                                <p class="kpi-value" id="reportInvoiceCount">0</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                        <circle cx="8.5" cy="7" r="4"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="reports.customerCount">Customer Count</h4>
                                <p class="kpi-value" id="reportCustomerCount">0</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Report Filters -->
                <div class="reports-section">
                    <div class="section-header">
                        <h3 data-translate="reports.filterReports">Filter Reports</h3>
                        <p class="section-subtitle" data-translate="reports.filterDescription">Select date range to filter report data</p>
                    </div>
                    
                    <div class="form-container">
                        <div class="btn-wrapper">
                            <div class="form-group">
                                <label data-translate="reports.fromDate">From Date:</label>
                                <input type="date" id="reportFromDate" class="form-control">
                            </div>
                            <div class="form-group">
                                <label data-translate="reports.toDate">To Date:</label>
                                <input type="date" id="reportToDate" class="form-control">
                            </div>
                            <div class="form-group">
                                <label style="visibility: hidden;">Filter</label>
                                <button id="filterReportBtn" class="btn btn-primary btn-icon-only" title="Apply Filter">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 3H2l7 8v7l6-3v-4z"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="form-group">
                                <label style="visibility: hidden;">Export</label>
                                <button id="exportReportBtn" class="btn btn-secondary btn-icon-only" title="Export Report">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts and Top Performers -->
                <div class="reports-section">
                    <div class="section-header">
                        <h3 data-translate="reports.businessPerformance">Business Performance</h3>
                        <p class="section-subtitle" data-translate="reports.performanceDescription">Business trends and top performers</p>
                    </div>
                    
                    <!-- Full Width Charts -->
                    <div style="margin-bottom: 1.5rem;">
                        <!-- Business Performance Overview -->
                        <div class="reports-section" style="margin-bottom: 1.5rem;">
                            <div class="section-header">
                                <h4 data-translate="reports.businessOverview">Business Performance Overview</h4>
                                <p class="section-subtitle" data-translate="reports.businessOverviewDescription">Monthly revenue, profit, cost trends and customer metrics</p>
                            </div>
                            
                            <div class="chart-container" style="height: 450px;">
                                <canvas id="businessOverviewChart"></canvas>
                            </div>
                        </div>
                        
                        <!-- Product Performance (Bigger Chart) -->
                        <div class="reports-section" style="margin-bottom: 1.5rem;">
                            <div class="section-header">
                                <h4 data-translate="reports.salesByProduct">Product Performance</h4>
                                <p class="section-subtitle" data-translate="reports.productPerformanceDescription">Product sales quantity and revenue comparison</p>
                            </div>
                            
                            <div class="chart-container" style="height: 500px;">
                                <canvas id="productPerformanceChart"></canvas>
                            </div>
                        </div>
                        
                        <!-- New Charts -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1.5rem;">
                            <div class="reports-section">
                                <div class="section-header">
                                    <h4 data-translate="reports.revenueVsProfit">Revenue Breakdown</h4>
                                    <p class="section-subtitle" data-translate="reports.revenueBreakdownDescription">Visual breakdown of revenue vs profit distribution</p>
                                </div>
                                
                                <div class="chart-container" style="height: 350px;">
                                    <canvas id="revenueVsProfitChart"></canvas>
                                </div>
                            </div>
                            
                            <div class="reports-section">
                                <div class="section-header">
                                    <h4 data-translate="reports.salesGrowthRate">Sales Growth Rate</h4>
                                    <p class="section-subtitle" data-translate="reports.salesGrowthDescription">Monthly sales growth percentage comparison</p>
                                </div>
                                
                                <div class="chart-container" style="height: 350px;">
                                    <canvas id="salesGrowthChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top Performers Side by Side -->
                    <div class="reports-section">
                        <div class="section-header">
                            <h4 data-translate="reports.topPerformers">Top Performers</h4>
                            <p class="section-subtitle" data-translate="reports.topPerformersDescription">Top products and customers by revenue</p>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                            <div class="reports-section" style="margin-bottom: 0;">
                                <div class="section-header">
                                    <h5 data-translate="reports.topProducts">Top 10 Products</h5>
                                    <p class="section-subtitle" data-translate="reports.topProductsDescription">Highest revenue generating products</p>
                                </div>
                                
                                <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                                    <table class="data-table" id="topProductsTable">
                                        <thead>
                                            <tr>
                                                <th style="width: 30px;">#</th>
                                                <th data-translate="common.product">Product</th>
                                                <th data-translate="reports.totalSales" style="text-align: right;">Sales</th>
                                            </tr>
                                        </thead>
                                        <tbody id="topProductsBody">
                                            <tr>
                                                <td colspan="3" class="empty-state">Loading...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="reports-section" style="margin-bottom: 0;">
                                <div class="section-header">
                                    <h5 data-translate="reports.topCustomers">Top 10 Customers</h5>
                                    <p class="section-subtitle" data-translate="reports.topCustomersDescription">Highest spending customers</p>
                                </div>
                                
                                <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                                    <table class="data-table" id="topCustomersTable">
                                        <thead>
                                            <tr>
                                                <th style="width: 30px;">#</th>
                                                <th data-translate="common.customer">Customer</th>
                                                <th data-translate="reports.totalSpent" style="text-align: right;">Total Spent</th>
                                            </tr>
                                        </thead>
                                        <tbody id="topCustomersBody">
                                            <tr>
                                                <td colspan="3" class="empty-state">Loading...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Performance Insights -->
                <div class="reports-section">
                    <div class="section-header">
                        <h3 data-translate="reports.performanceInsights">Performance Insights</h3>
                        <p class="section-subtitle" data-translate="reports.insightsDescription">Key performance indicators and business intelligence</p>
                    </div>
                    
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="reports.profitMargin">Profit Margin</h4>
                                <p class="kpi-value" id="reportProfitMargin">0%</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="reports.avgOrderValue">Avg Order Value</h4>
                                <p class="kpi-value" id="reportAvgOrderValue">$0.00</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 3v18h18"/>
                                        <path d="M18 17V9"/>
                                        <path d="M13 17V5"/>
                                        <path d="M8 17v-3"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="reports.productsSold">Products Sold</h4>
                                <p class="kpi-value" id="reportProductsSold">0</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14 2 14 8 20 8"/>
                                        <line x1="16" y1="13" x2="8" y2="13"/>
                                        <line x1="16" y1="17" x2="8" y2="17"/>
                                        <polyline points="10 9 9 9 8 9"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="reports.reportsGenerated">Reports Generated</h4>
                                <p class="kpi-value" id="reportCount">0</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Detailed Sales by Product -->
                <div class="reports-section">
                    <div class="section-header">
                        <h3 data-translate="reports.detailedSalesByProduct">Detailed Sales by Product</h3>
                        <p class="section-subtitle" data-translate="reports.detailedSalesDescription">Comprehensive product sales data with quantities and profits</p>
                    </div>
                    
                    <div id="salesByProduct" class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th data-translate="common.product">Product</th>
                                    <th data-translate="reports.quantitySold">Quantity Sold</th>
                                    <th data-translate="reports.totalSales">Total Sales</th>
                                    <th data-translate="reports.totalProfit">Total Profit</th>
                                </tr>
                            </thead>
                            <tbody id="salesByProductBody">
                                <tr>
                                    <td colspan="4" class="empty-state" data-translate="common.noData">No data available</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Users Tab (Admin Only) -->
            <div id="usersTab" class="tab-content">
                <div class="tab-header">
                    <h2 data-translate="users.title">User Management</h2>
                    <button id="addUserBtn" class="btn btn-primary btn-icon-only" title="Add User">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="8.5" cy="7" r="4"/>
                            <line x1="20" y1="8" x2="20" y2="14"/>
                            <line x1="23" y1="11" x2="17" y2="11"/>
                        </svg>
                    </button>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-translate="users.username">Username</th>
                                <th data-translate="users.fullName">Full Name</th>
                                <th data-translate="users.role">Role</th>
                                <th data-translate="users.email">Email</th>
                                <th data-translate="users.createdDate">Created Date</th>
                                <th data-translate="users.status">Status</th>
                                <th data-translate="common.actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <tr>
                                <td colspan="7" class="empty-state" data-translate="users.loadingUsers">Loading users...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settingsTab" class="tab-content">
                <!-- Settings Overview -->
                <div class="settings-section">
                    <div class="section-header">
                        <h3 data-translate="settings.overview">Settings Overview</h3>
                        <p class="section-subtitle" data-translate="settings.overviewDescription">Configure application preferences and manage system settings</p>
                    </div>
                    
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                                        <path d="M12 8v6"/>
                                        <path d="M9 13h6"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="settings.currentTheme">Current Theme</h4>
                                <p class="kpi-value" id="currentThemeValue">Light</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="settings.language">Language</h4>
                                <p class="kpi-value" id="currentLanguageValue">English</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <polyline points="12 6 12 12 16 14"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="settings.autoBackup">Auto Backup</h4>
                                <p class="kpi-value" id="autoBackupStatus">Enabled</p>
                            </div>
                        </div>
                        
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <div class="kpi-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                                        <line x1="3" y1="6" x2="21" y2="6"/>
                                        <path d="M16 10a4 4 0 0 1-8 0"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="kpi-content">
                                <h4 data-translate="settings.notifications">Notifications</h4>
                                <p class="kpi-value" id="notificationsStatus">Enabled</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-container">
                    <!-- Display & Interface Settings -->
                    <div class="settings-section">
                        <div class="section-header">
                            <h3 data-translate="settings.display">Display & Interface</h3>
                            <p class="section-subtitle" data-translate="settings.displayDescription">Customize the appearance and behavior of the interface</p>
                        </div>
                        <div class="settings-group">
                            <label for="themeSelect" data-translate="settings.theme">Theme</label>
                            <select id="themeSelect" class="form-control">
                                <option value="light" data-translate="settings.light">Light</option>
                                <option value="dark" data-translate="settings.dark">Dark</option>
                                <option value="auto" data-translate="settings.auto">Auto (System)</option>
                            </select>
                            <p class="form-hint" data-translate="settings.themeHint">Choose your preferred theme for the application.</p>
                        </div>
                        <div class="settings-group">
                            <label for="fontSizeSelect" data-translate="settings.fontSize">Font Size</label>
                            <select id="fontSizeSelect" class="form-control">
                                <option value="small" data-translate="settings.small">Small</option>
                                <option value="medium" data-translate="settings.medium">Medium</option>
                                <option value="large" data-translate="settings.large">Large</option>
                            </select>
                            <p class="form-hint" data-translate="settings.fontSizeHint">Adjust the text size for better readability.</p>
                        </div>
                        <!-- Interface Scaling Setting -->
                        <div class="settings-group">
                            <label for="interfaceScaleSelect" data-translate="settings.interfaceScale">Interface Scale</label>
                            <select id="interfaceScaleSelect" class="form-control">
                                <option value="75" data-translate="settings.scale75">75%</option>
                                <option value="100" selected data-translate="settings.scale100">100%</option>
                                <option value="125" data-translate="settings.scale125">125%</option>
                                <option value="150" data-translate="settings.scale150">150%</option>
                            </select>
                            <p class="form-hint" data-translate="settings.interfaceScaleHint">Adjust the overall interface scaling for better visibility.</p>
                        </div>
                        <!-- Animation Preferences Setting -->
                        <div class="settings-group">
                            <label for="reduceAnimationsToggle" data-translate="settings.reduceAnimations">Reduce Animations</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="reduceAnimationsToggle">
                                <span class="toggle-slider"></span>
                            </div>
                            <p class="form-hint" data-translate="settings.reduceAnimationsHint">Reduce or disable animations for better performance.</p>
                        </div>
                        <!-- UI Density Setting -->
                        <div class="settings-group">
                            <label for="uiDensitySelect" data-translate="settings.uiDensity">UI Density</label>
                            <select id="uiDensitySelect" class="form-control">
                                <option value="compact" data-translate="settings.compact">Compact</option>
                                <option value="normal" selected data-translate="settings.normal">Normal</option>
                                <option value="spacious" data-translate="settings.spacious">Spacious</option>
                            </select>
                            <p class="form-hint" data-translate="settings.uiDensityHint">Adjust the spacing and density of UI elements.</p>
                        </div>
                    </div>

                    <!-- Language & Region Settings -->
                    <div class="settings-section">
                        <div class="section-header">
                            <h3 data-translate="settings.languageRegion">Language & Region</h3>
                            <p class="section-subtitle" data-translate="settings.languageRegionDescription">Configure language, currency, and regional preferences</p>
                        </div>
                        <div class="settings-group">
                            <label for="languageSelect" data-translate="settings.language">Language</label>
                            <select id="languageSelect" class="form-control">
                                <option value="en" data-translate="settings.english">English</option>
                                <option value="fr" data-translate="settings.french">Franais</option>
                                <option value="ar" data-translate="settings.arabic"></option>
                            </select>
                            <p class="form-hint" data-translate="settings.languageHint">Choose your preferred language for the application interface.</p>
                        </div>
                        <div class="settings-group">
                            <label for="currencySelect" data-translate="settings.currency">Currency</label>
                            <select id="currencySelect" class="form-control">
                                <option value="USD">USD ($)</option>
                                <option value="EUR">EUR ()</option>
                                <option value="GBP">GBP ()</option>
                                <option value="JPY">JPY ()</option>
                                <option value="CNY">CNY ()</option>
                                <option value="DZD">DZD (.)</option>
                                <option value="SAR">SAR (.)</option>
                                <option value="AED">AED (.)</option>
                                <option value="MAD">MAD (..)</option>
                            </select>
                            <p class="form-hint" data-translate="settings.currencyHint">Choose the currency to display throughout the application.</p>
                        </div>
                    </div>

                    <!-- Print & Export Settings -->
                    <div class="settings-section">
                        <div class="section-header">
                            <h3 data-translate="settings.printSettings">Print & Export</h3>
                            <p class="section-subtitle" data-translate="settings.printSettingsDescription">Configure default print options and invoice styles</p>
                        </div>
                        <div class="settings-group">
                            <label for="printPaperSizeSelect" data-translate="settings.printPaperSize">Paper Size</label>
                            <select id="printPaperSizeSelect" class="form-control">
                                <option value="A4">A4</option>
                                <option value="Letter">Letter</option>
                                <option value="Legal">Legal</option>
                                <option value="Tabloid">Tabloid</option>
                            </select>
                            <p class="form-hint" data-translate="settings.printPaperSizeHint">Select the default paper size for printing.</p>
                        </div>
                        <div class="settings-group">
                            <label for="printOrientationSelect" data-translate="settings.printOrientation">Print Orientation</label>
                            <select id="printOrientationSelect" class="form-control">
                                <option value="portrait" data-translate="settings.portrait">Portrait</option>
                                <option value="landscape" data-translate="settings.landscape">Landscape</option>
                            </select>
                            <p class="form-hint" data-translate="settings.printOrientationHint">Select the default orientation for printing.</p>
                        </div>
                        <div class="settings-group">
                            <label for="printQualitySelect" data-translate="settings.printQuality">Print Quality</label>
                            <select id="printQualitySelect" class="form-control">
                                <option value="draft" data-translate="settings.draft">Draft</option>
                                <option value="standard" selected data-translate="settings.standard">Standard</option>
                                <option value="high" data-translate="settings.highQuality">High Quality</option>
                            </select>
                            <p class="form-hint" data-translate="settings.printQualityHint">Select the default print quality setting.</p>
                        </div>
                        <div class="settings-group">
                            <label for="invoiceStyleSelect" data-translate="settings.invoiceStyle">Invoice Style</label>
                            <select id="invoiceStyleSelect" class="form-control">
                                <option value="classical" data-translate="settings.classicalStyle">Classical</option>
                                <option value="modern" data-translate="settings.modernStyle">Modern</option>
                                <option value="blackwhite" data-translate="settings.blackWhiteStyle">Black & White</option>
                            </select>
                            <p class="form-hint" data-translate="settings.invoiceStyleHint">Select the default style for invoices.</p>
                        </div>
                        <div class="settings-group">
                            <label for="invoiceSizingSelect" data-translate="settings.invoiceSizing">Invoice Sizing</label>
                            <select id="invoiceSizingSelect" class="form-control">
                                <option value="full" data-translate="settings.fullSize">Full Size (A4)</option>
                                <option value="compact" data-translate="settings.compactSize">Compact (Half A4)</option>
                            </select>
                            <p class="form-hint" data-translate="settings.invoiceSizingHint">Select the default sizing for invoices in preview, export, and print.</p>
                        </div>
                    </div>

                    <!-- Data Management & Backup Settings -->
                    <div class="settings-section">
                        <div class="section-header">
                            <h3 data-translate="settings.dataManagement">Data Management & Backup</h3>
                            <p class="section-subtitle" data-translate="settings.dataManagementDescription">Configure backup and data handling preferences</p>
                        </div>
                        <div class="settings-group">
                            <label for="autoBackupToggle" data-translate="settings.autoBackup">Auto Backup</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="autoBackupToggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                            <p class="form-hint" data-translate="settings.autoBackupHint">Automatically create backup copies when saving data.</p>
                        </div>
                        <div class="settings-group">
                            <label for="backupRetentionSelect" data-translate="settings.backupRetention">Backup Retention</label>
                            <select id="backupRetentionSelect" class="form-control">
                                <option value="3" data-translate="settings.threeBackups">3 backups</option>
                                <option value="5" selected data-translate="settings.fiveBackups">5 backups</option>
                                <option value="10" data-translate="settings.tenBackups">10 backups</option>
                                <option value="unlimited" data-translate="settings.unlimited">Unlimited</option>
                            </select>
                            <p class="form-hint" data-translate="settings.backupRetentionHint">Number of backup files to keep.</p>
                        </div>
                        
                        <!-- Backup Manager -->
                        <div class="settings-group">
                            <label data-translate="settings.backupManager">Backup Manager</label>
                            <p class="form-hint" data-translate="settings.backupManagerHint">View, restore, or delete backup files.</p>
                            <div class="data-management-buttons">
                                <button id="viewBackupsBtn" class="btn btn-primary">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14 2 14 8 20 8"/>
                                        <line x1="16" y1="13" x2="8" y2="13"/>
                                        <line x1="16" y1="17" x2="8" y2="17"/>
                                        <polyline points="10 9 9 9 8 9"/>
                                    </svg>
                                    <span data-translate="settings.viewBackups">View Backups</span>
                                </button>
                                <button id="createBackupBtn" class="btn btn-secondary">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                                        <polyline points="17,21 17,13 7,13 7,21"/>
                                        <polyline points="7,3 7,8 15,8"/>
                                    </svg>
                                    <span data-translate="settings.createBackup">Create Backup Now</span>
                                </button>
                                <button id="fileMenuBtn" class="btn btn-secondary">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                    <span data-translate="settings.saveCopy">Save a Copy</span>
                                </button>
                            </div>
                        </div>
                        <div class="settings-group">
                            <label data-translate="settings.workbookSource">Workbook Source</label>
                            <div class="input-with-button">
                                <input id="customWorkbookPathInput" type="text" class="form-control" placeholder="/path/to/file.xlsx" readonly style="flex: 1; min-width: 0;">
                                <div class="btn-group btn-group-horizontal">
                                    <button id="selectWorkbookBtn" class="btn btn-secondary" type="button">
                                        <span data-translate="settings.selectWorkbook">Select Excel file</span>
                                    </button>
                                    <button id="clearWorkbookBtn" class="btn btn-tertiary" type="button">
                                        <span data-translate="settings.useDefaultFile">Use default</span>
                                    </button>
                                </div>
                            </div>
                            <p class="form-hint" data-translate="settings.workbookSourceHint">Choose a specific Excel file to override the default.</p>
                        </div>
                    </div>

                    <!-- Notifications & Alerts Settings -->
                    <div class="settings-section">
                        <div class="section-header">
                            <h3 data-translate="settings.notifications">Notifications & Alerts</h3>
                            <p class="section-subtitle" data-translate="settings.notificationsDescription">Configure notification preferences and alerts</p>
                        </div>
                        <div class="settings-group">
                            <label for="lowStockNotificationsToggle" data-translate="settings.lowStockAlerts">Low Stock Alerts</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="lowStockNotificationsToggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                            <p class="form-hint" data-translate="settings.lowStockHint">Receive notifications when products are running low on stock.</p>
                        </div>
                        <div class="settings-group">
                            <label for="lowStockThreshold" data-translate="settings.lowStockThreshold">Low stock threshold</label>
                            <input type="number" id="lowStockThreshold" class="form-control" min="0" step="1" value="5">
                            <p class="form-hint" data-translate="settings.lowStockThresholdHint">Products at or below this quantity will be highlighted and shown in alerts.</p>
                        </div>
                        <div class="settings-group">
                            <label for="soundNotificationsToggle" data-translate="settings.soundNotifications">Sound Notifications</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="soundNotificationsToggle" checked>
                                <span class="toggle-slider"></span>
                            </div>
                            <p class="form-hint" data-translate="settings.soundHint">Play sound effects for notifications.</p>
                        </div>
                    </div>

                    <!-- Application Behavior Settings -->
                    <div class="settings-section">
                        <div class="section-header">
                            <h3 data-translate="settings.application">Application Behavior</h3>
                            <p class="section-subtitle" data-translate="settings.applicationDescription">Configure application behavior and startup preferences</p>
                        </div>
                        <div class="settings-group">
                            <label for="startupBehaviorSelect" data-translate="settings.startupBehavior">Startup Behavior</label>
                            <select id="startupBehaviorSelect" class="form-control">
                                <option value="lastWorkbook" data-translate="settings.lastWorkbook">Open last used workbook</option>
                                <option value="defaultWorkbook" data-translate="settings.defaultWorkbook">Open default workbook</option>
                                <option value="prompt" data-translate="settings.prompt">Ask which workbook to open</option>
                            </select>
                            <p class="form-hint" data-translate="settings.startupHint">Choose what happens when the application starts.</p>
                        </div>
                        <div class="settings-group">
                            <label for="autoRefreshToggle" data-translate="settings.autoRefresh">Auto Refresh Data</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="autoRefreshToggle">
                                <span class="toggle-slider"></span>
                            </div>
                            <p class="form-hint" data-translate="settings.autoRefreshHint">Automatically refresh data every 5 minutes.</p>
                        </div>
                        <div class="settings-group">
                            <label for="accountingEnabledToggle" data-translate="settings.enableAccounting">Enable Accounting</label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="accountingEnabledToggle">
                                <span class="toggle-slider"></span>
                            </div>
                            <p class="form-hint" data-translate="settings.enableAccountingHint">Show or hide the Accounting module and tab.</p>
                        </div>
                    </div>

                    <!-- Privacy & Compliance -->
                    <div class="settings-section">
                        <div class="section-header">
                            <h3 data-translate="gdpr.title">Privacy & Compliance</h3>
                            <p class="section-subtitle" data-translate="gdpr.subtitle">Manage customer data privacy and compliance</p>
                        </div>
                        
                        <!-- GDPR & Data Privacy -->
                        <div class="settings-subsection">
                            <h4 data-translate="gdpr.title">GDPR & Data Privacy</h4>
                            
                            <!-- Export Customer Data -->
                            <div class="settings-group">
                                <label data-translate="gdpr.exportData">Export Customer Data</label>
                                <p class="form-hint" data-translate="gdpr.exportDataDesc">Export all personal data for a customer (GDPR Right to Access)</p>
                                <div class="privacy-buttons">
                                    <select id="gdprExportCustomerSelect" class="form-control" style="flex: 1;">
                                        <option value="" data-translate="gdpr.selectCustomerPlaceholder">Choose a customer...</option>
                                    </select>
                                    <button id="gdprExportBtn" class="btn btn-primary btn-icon-only" title="Export Data">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                            <polyline points="7 10 12 15 17 10"/>
                                            <line x1="12" y1="15" x2="12" y2="3"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <!-- Delete Customer Data -->
                            <div class="settings-group">
                                <label data-translate="gdpr.deleteData">Delete Customer Data</label>
                                <p class="form-hint" data-translate="gdpr.deleteDataDesc">Permanently delete or anonymize customer data (Right to be Forgotten)</p>
                                <div class="privacy-buttons">
                                    <select id="gdprDeleteCustomerSelect" class="form-control">
                                        <option value="" data-translate="gdpr.selectCustomerPlaceholder">Choose a customer...</option>
                                    </select>
                                    <input type="text" id="gdprDeleteReason" class="form-control" placeholder="Enter reason for deletion (required)" data-translate-placeholder="gdpr.deleteReasonPlaceholder">
                                    <button id="gdprDeleteBtn" class="btn btn-danger">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="3 6 5 6 21 6"/>
                                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                        </svg>
                                        <span data-translate="gdpr.deleteButton">Delete Data</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Audit & Compliance -->
                        <div class="settings-subsection">
                            <h4 data-translate="audit.title">Audit & Compliance</h4>
                            
                            <!-- View Activity Logs -->
                            <div class="settings-group">
                                <label data-translate="audit.activityLogs">Activity Logs</label>
                                <p class="form-hint" data-translate="audit.activityLogsDesc">View all user actions and system changes</p>
                                <div class="audit-buttons">
                                    <input type="date" id="auditStartDate" class="form-control" style="flex: 1; min-width: 150px;">
                                    <input type="date" id="auditEndDate" class="form-control" style="flex: 1; min-width: 150px;">
                                    <button id="auditViewLogsBtn" class="btn btn-primary">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                            <circle cx="12" cy="12" r="3"/>
                                        </svg>
                                        <span data-translate="audit.viewLogs">View Logs</span>
                                    </button>
                                </div>
                                <div id="auditLogsContainer" style="margin-top: 15px; max-height: 300px; overflow-y: auto; display: none;">
                                    <table class="data-table" style="font-size: 12px;">
                                        <thead>
                                            <tr>
                                                <th data-translate="audit.timestamp">Timestamp</th>
                                                <th data-translate="audit.userName">User</th>
                                                <th data-translate="audit.action">Action</th>
                                                <th data-translate="audit.entity">Entity</th>
                                            </tr>
                                        </thead>
                                        <tbody id="auditLogsTableBody"></tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Generate Audit Report -->
                            <div class="settings-group">
                                <label data-translate="audit.generateReport">Generate Audit Report</label>
                                <p class="form-hint" data-translate="audit.generateReportDesc">Create comprehensive audit report for compliance</p>
                                <div class="audit-buttons">
                                    <button id="auditGenerateReportBtn" class="btn btn-primary">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                            <polyline points="14 2 14 8 20 8"/>
                                            <line x1="16" y1="13" x2="8" y2="13"/>
                                            <line x1="16" y1="17" x2="8" y2="17"/>
                                            <polyline points="10 9 9 9 8 9"/>
                                        </svg>
                                        <span data-translate="audit.generateBtn">Generate Report</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Export Audit Logs -->
                            <div class="settings-group">
                                <label data-translate="audit.exportLogs">Export Audit Logs</label>
                                <p class="form-hint" data-translate="audit.exportLogsDesc">Export logs in JSON or CSV format</p>
                                <div class="audit-buttons">
                                    <button id="auditExportJSONBtn" class="btn btn-secondary btn-icon-only" title="Export as JSON">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                            <polyline points="7 10 12 15 17 10"/>
                                            <line x1="12" y1="15" x2="12" y2="3"/>
                                        </svg>
                                    </button>
                                    <button id="auditExportCSVBtn" class="btn btn-secondary btn-icon-only" title="Export as CSV">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                            <polyline points="7 10 12 15 17 10"/>
                                            <line x1="12" y1="15" x2="12" y2="3"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="settings-actions">
                        <button id="saveSettingsBtn" class="btn btn-primary">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                                <polyline points="17,21 17,13 7,13 7,21"/>
                                <polyline points="7,3 7,8 15,8"/>
                            </svg>
                            <span data-translate="settings.saveSettings">Save Settings</span>
                        </button>
                        <button id="resetSettingsBtn" class="btn btn-secondary">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                                <path d="M21 3v5h-5"/>
                                <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                                <path d="M3 21v-5h5"/>
                            </svg>
                            <span data-translate="settings.resetDefaults">Reset to Defaults</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="productModalTitle" data-translate="products.addProduct">Add Product</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="productForm" class="modal-form">
                <div class="form-section">
                    <div class="form-group">
                        <label for="productName"><span data-translate="products.productName">Product Name</span> <span data-translate="products.required">*</span></label>
                        <input type="text" id="productName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="productQuantity"><span data-translate="products.quantity">Quantity</span> <span data-translate="products.required">*</span></label>
                        <input type="number" id="productQuantity" class="form-control" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="productBuyPrice"><span data-translate="products.buyPrice">Buy Price</span> <span data-translate="products.required">*</span></label>
                        <input type="number" id="productBuyPrice" class="form-control" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="productSalePrice"><span data-translate="products.salePrice">Sale Price</span> <span data-translate="products.required">*</span></label>
                        <input type="number" id="productSalePrice" class="form-control" min="0" step="0.01" required>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary" data-translate="common.save">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer Modal -->
    <div id="customerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="customerModalTitle" data-translate="customers.addCustomer">Add Customer</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="customerForm" class="modal-form">
                <div class="form-section">
                    <div class="form-group">
                        <label for="customerName"><span data-translate="customers.customerName">Customer Name</span> <span data-translate="customers.required">*</span></label>
                        <input type="text" id="customerName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="customerPhone" data-translate="customers.phone">Phone</label>
                        <input type="tel" id="customerPhone" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="customerEmail" data-translate="customers.email">Email</label>
                        <input type="email" id="customerEmail" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="customerAddress" data-translate="customers.address">Address</label>
                        <textarea id="customerAddress" class="form-control" rows="3"></textarea>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary" data-translate="common.save">Save</button>
                </div>
            </form>
            
            <!-- Purchase History Section (shown when editing) -->
            <div id="customerPurchaseHistory" style="display: none; margin-top: 20px; padding-top: 20px; border-top: 2px solid var(--border-color);">
                <h3 style="margin-bottom: 15px; color: var(--text-primary);">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 8px;">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                    <span data-translate="customers.purchaseHistory">Purchase History</span>
                </h3>
                <div id="customerPurchaseHistoryContent">
                    <p class="empty-state" data-translate="customers.noPurchases">No purchases yet</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Invoice Modal -->
    <div id="invoiceModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 data-translate="sales.newInvoice">New Invoice</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-form">
                <div class="invoice-header-form">
                    <div class="form-group">
                        <label for="invoiceCustomer"><span data-translate="sales.customer">Customer</span> <span data-translate="sales.required">*</span></label>
                        <div class="autocomplete-wrapper">
                            <input type="text" id="invoiceCustomer" class="form-control" data-translate-placeholder="sales.typeToSearch" required>
                            <div id="customerAutocomplete" class="autocomplete-dropdown"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="invoiceDate"><span data-translate="sales.date">Date</span> <span data-translate="sales.required">*</span></label>
                        <input type="date" id="invoiceDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="invoiceStatus" data-translate="sales.status">Status</label>
                        <select id="invoiceStatus" class="form-control">
                            <option value="Pending" data-translate="sales.pending">Pending</option>
                            <option value="Paid" data-translate="sales.paid">Paid</option>
                            <option value="Cancelled" data-translate="sales.cancelled">Cancelled</option>
                        </select>
                    </div>
                </div>

                <h3 data-translate="sales.invoiceItems">Invoice Items</h3>
                <div class="invoice-items-form">
                    <div class="form-row product-row">
                        <div class="form-group product-search-group">
                            <label for="itemProduct" data-translate="sales.product">Product</label>
                            <div class="autocomplete-wrapper">
                                <input type="text" id="itemProduct" class="form-control" data-translate-placeholder="sales.typeToSearch">
                                <div id="productAutocomplete" class="autocomplete-dropdown"></div>
                            </div>
                        </div>
                        <div class="form-group add-button-group">
                            <label>&nbsp;</label>
                            <button type="button" id="addItemBtn" class="btn btn-primary btn-icon-only" title="Add Item">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 5v14M5 12h14"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="form-row details-row">
                        <div class="form-group">
                            <label for="itemQuantity" data-translate="sales.quantity">Quantity</label>
                            <input type="number" id="itemQuantity" class="form-control" min="1" value="1">
                        </div>
                        <div class="form-group">
                            <label for="itemUnitPrice" data-translate="sales.unitPrice">Unit Price</label>
                            <input type="number" id="itemUnitPrice" class="form-control" min="0" step="0.01" readonly>
                        </div>
                        <div class="form-group">
                            <label for="itemCustomPrice" data-translate="sales.customPrice">Custom Price</label>
                            <input type="number" id="itemCustomPrice" class="form-control" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label for="itemTotal" data-translate="sales.total">Total</label>
                            <input type="number" id="itemTotal" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="form-row-hint">
                        <small class="form-hint" data-translate="sales.customPriceHint">Leave empty to use default product price</small>
                    </div>
                </div>

                <div class="invoice-items-list">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-translate="sales.product">Product</th>
                                <th data-translate="common.quantity">Quantity</th>
                                <th data-translate="sales.unitPrice">Unit Price</th>
                                <th data-translate="sales.total">Total</th>
                                <th data-translate="sales.profit">Profit</th>
                                <th data-translate="common.actions">Action</th>
                            </tr>
                        </thead>
                        <tbody id="invoiceItemsBody">
                            <tr>
                                <td colspan="6" class="empty-state" data-translate="sales.noItems">No items added yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="invoice-summary">
                    <div class="summary-row">
                        <span data-translate="sales.totalAmount">Total Amount:</span>
                        <strong id="invoiceTotalAmount">$0.00</strong>
                    </div>
                    <div class="summary-row">
                        <span data-translate="sales.totalProfit">Total Profit:</span>
                        <strong id="invoiceTotalProfit">$0.00</strong>
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.cancel">Cancel</button>
                    <button type="button" id="saveInvoiceBtn" class="btn btn-primary" data-translate="sales.saveInvoice">Save Invoice</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Invoice Status Modal -->
    <div id="editStatusModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 data-translate="sales.editStatus">Edit Invoice Status</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="editStatusForm" class="modal-form">
                <div class="form-section">
                    <div class="form-group">
                        <label data-translate="sales.invoiceId">Invoice ID</label>
                        <input type="text" id="editStatusInvoiceId" class="form-control" readonly>
                    </div>
                    <div class="form-group">
                        <label data-translate="common.customer">Customer</label>
                        <input type="text" id="editStatusCustomer" class="form-control" readonly>
                    </div>
                    <div class="form-group">
                        <label for="editStatusSelect"><span data-translate="sales.status">Status</span> <span data-translate="sales.required">*</span></label>
                        <select id="editStatusSelect" class="form-control" required>
                            <option value="Paid" data-translate="sales.paid">Paid</option>
                            <option value="Pending" data-translate="sales.pending">Pending</option>
                            <option value="Cancelled" data-translate="sales.cancelled">Cancelled</option>
                        </select>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary" data-translate="sales.updateStatus">Update Status</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Inventory Movement Modal -->
    <div id="inventoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-translate="inventory.stockMovement">Stock Movement</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="inventoryForm" class="modal-form">
                <div class="form-section">
                    <div class="form-group">
                        <label for="movementProduct"><span data-translate="common.product">Product</span> <span data-translate="inventory.required">*</span></label>
                        <select id="movementProduct" class="form-control" required>
                            <option value="" data-translate="inventory.selectProduct">Select Product</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="movementType"><span data-translate="inventory.movementType">Movement Type</span> <span data-translate="inventory.required">*</span></label>
                        <select id="movementType" class="form-control" required>
                            <option value="IN" data-translate="inventory.stockIn">Stock In (Purchase/Return)</option>
                            <option value="OUT" data-translate="inventory.stockOut">Stock Out (Sale/Damage)</option>
                            <option value="ADJUSTMENT" data-translate="inventory.adjustmentType">Adjustment (Inventory Count)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="movementQuantity"><span data-translate="common.quantity">Quantity</span> <span data-translate="inventory.required">*</span></label>
                        <input type="number" id="movementQuantity" class="form-control" min="1" required>
                        <small class="form-hint"><span data-translate="inventory.currentStock">Current stock:</span> <span id="currentStock">0</span></small>
                    </div>
                    <div class="form-group">
                        <label for="movementDate"><span data-translate="common.date">Date</span> <span data-translate="inventory.required">*</span></label>
                        <input type="date" id="movementDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="movementReference" data-translate="inventory.reference">Reference</label>
                        <input type="text" id="movementReference" class="form-control" placeholder="PO#, Invoice#, etc.">
                    </div>
                    <div class="form-group">
                        <label for="movementNotes" data-translate="inventory.notes">Notes</label>
                        <textarea id="movementNotes" class="form-control" rows="3" placeholder="Additional notes..."></textarea>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary" data-translate="inventory.saveMovement">Save Movement</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="userModalTitle" data-translate="users.addUser">Add User</h2>
                <button class="modal-close">&times;</button>
            </div>
            <form id="userForm" class="modal-form">
                <div class="form-section">
                    <div class="form-group">
                        <label for="userUsername"><span data-translate="users.username">Username</span> <span data-translate="users.required">*</span></label>
                        <input type="text" id="userUsername" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="userPassword"><span data-translate="users.password">Password</span> <span data-translate="users.required">*</span></label>
                        <input type="password" id="userPassword" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="userFullName"><span data-translate="users.fullName">Full Name</span> <span data-translate="users.required">*</span></label>
                        <input type="text" id="userFullName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="userRole"><span data-translate="users.role">Role</span> <span data-translate="users.required">*</span></label>
                        <select id="userRole" class="form-control" required>
                            <option value="Admin" data-translate="users.admin">Admin</option>
                            <option value="Manager" data-translate="users.manager">Manager</option>
                            <option value="Cashier" data-translate="users.cashier">Cashier</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="userEmail" data-translate="users.email">Email</label>
                        <input type="email" id="userEmail" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="userIsActive" checked>
                            <span data-translate="users.activeUser">Active User</span>
                        </label>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary" data-translate="users.saveUser">Save User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer History Modal -->
    <div id="customerHistoryModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="customerHistoryTitle" data-translate="customers.customerHistory">Customer History</h2>
                <div style="display: flex; gap: 0.5rem; align-items: center;">
                    <button class="btn btn-secondary btn-icon-only" onclick="exportCustomerHistoryPDF()" title="Export PDF">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </button>
                    <button class="btn btn-primary btn-icon-only" onclick="exportCustomerHistoryExcel()" title="Export Excel">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <line x1="10" y1="9" x2="9" y2="9"/>
                            <path d="M9 13v4"/>
                        </svg>
                    </button>
                    <button class="modal-close">&times;</button>
                </div>
            </div>
            <div class="modal-form">
                <!-- Customer Analytics Summary -->
                <div class="dashboard-grid" style="margin-bottom: 2rem; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                    <div class="stat-card">
                        <div class="stat-icon" style="width: 60px; height: 60px; margin: 0 auto 1rem;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3 data-translate="customers.totalSpent">Total Spent</h3>
                            <p class="stat-value" id="customerTotalSpent" style="font-size: 1.5rem;">$0.00</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="width: 60px; height: 60px; margin: 0 auto 1rem;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14 2 14 8 20 8"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3 data-translate="customers.totalInvoices">Total Invoices</h3>
                            <p class="stat-value" id="customerTotalInvoices" style="font-size: 1.5rem;">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="width: 60px; height: 60px; margin: 0 auto 1rem;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12 6 12 12 16 14"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3 data-translate="customers.lastPurchase">Last Purchase</h3>
                            <p class="stat-value" id="customerLastPurchase" style="font-size: 1rem;">-</p>
                        </div>
                    </div>
                </div>

                <!-- Purchase Trend Chart -->
                <div class="dashboard-section" style="margin-bottom: 2rem;">
                    <h2 data-translate="customers.purchaseTrend">Purchase Trend</h2>
                    <div style="height: 250px; position: relative;">
                        <canvas id="customerPurchaseTrendChart"></canvas>
                    </div>
                </div>

                <!-- Customer Invoices -->
                <div class="dashboard-section">
                    <h2 data-translate="customers.invoiceHistory">Invoice History</h2>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th data-translate="sales.invoiceId">Invoice ID</th>
                                    <th data-translate="common.date">Date</th>
                                    <th data-translate="common.amount">Amount</th>
                                    <th data-translate="dashboard.profit">Profit</th>
                                    <th data-translate="common.status">Status</th>
                                    <th data-translate="common.actions">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="customerInvoicesTableBody">
                                <tr>
                                    <td colspan="6" class="empty-state" data-translate="common.noInvoices">No invoices found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Backup Manager Modal -->
    <div id="backupManagerModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 data-translate="settings.backupManager">Backup Manager</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-form">
                <div class="backup-manager-header btn-wrapper">
                    <p class="form-hint" data-translate="settings.backupListDesc">View and manage your backup files. You can restore or delete backups as needed.</p>
                    <button id="refreshBackupsBtn" class="btn btn-secondary btn-icon-only" title="Refresh List">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                            <path d="M21 3v5h-5"/>
                            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
                            <path d="M3 21v-5h5"/>
                        </svg>
                    </button>
                </div>
                
                <div class="table-container" style="max-height: 400px; overflow-y: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th data-translate="settings.backupName">Backup Name</th>
                                <th data-translate="settings.backupDate">Date Created</th>
                                <th data-translate="settings.backupSize">Size</th>
                                <th data-translate="common.actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="backupsTableBody">
                            <tr>
                                <td colspan="4" class="empty-state" data-translate="settings.loadingBackups">Loading backups...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary modal-cancel" data-translate="common.close">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../../dist/renderer/renderer.js"></script>
</body>
</html>
